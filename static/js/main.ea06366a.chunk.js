(this["webpackJsonpgame-ranking"]=this["webpackJsonpgame-ranking"]||[]).push([[0],{308:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),i=a.n(c),s=(a(308),a(79)),o=a(110),l=a.n(o),d=a(243),u=a(22),j=a(510),b=a(556),O=a(513),p=a(515),h=a(116),m=a(48),x=a.n(m),f=a(2),g=Object(j.a)((function(e){return Object(b.a)({root:{flexGrow:1,marginBottom:e.spacing(4)},AppBar:{background:"radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(252,70,107,1) 110%)"},EmojiEvents:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function y(){var e=g();return Object(f.jsx)("div",{className:e.root,children:Object(f.jsx)(O.a,{className:e.AppBar,position:"static",children:Object(f.jsxs)(p.a,{children:[Object(f.jsx)(x.a,{className:e.EmojiEvents}),Object(f.jsx)(h.a,{variant:"h6",className:e.title,children:"Game Ranking"})]})})})}var v=a(516),k=a(517),C=a(251),w=a.n(C),N=a(252),D=a.n(N),S=a(248),R=a.n(S),F=a(249),P=a.n(F),I=a(250),G=a.n(I),E=a(253),A=a.n(E),U=a(254),B=a.n(U),M=Object(j.a)((function(e){return Object(b.a)({root:{flexGrow:1,backgroundColor:e.palette.secondary.main,width:"100%",position:"fixed",bottom:0,zIndex:100}})}));function L(e){var t=M(),a=e.currentPage;return Object(f.jsxs)(v.a,{value:a,onChange:e.handleChangeCurrentPage,className:t.root,children:[Object(f.jsx)(k.a,{label:"Summary",value:"summary",icon:"summary"===a?Object(f.jsx)(R.a,{}):Object(f.jsx)(P.a,{})}),Object(f.jsx)(k.a,{label:"Games",value:"games",icon:"games"===a?Object(f.jsx)(x.a,{}):Object(f.jsx)(G.a,{})}),Object(f.jsx)(k.a,{label:"Players",value:"players",icon:"players"===a?Object(f.jsx)(w.a,{}):Object(f.jsx)(D.a,{})}),Object(f.jsx)(k.a,{label:"Settings",value:"settings",icon:"settings"===a?Object(f.jsx)(A.a,{}):Object(f.jsx)(B.a,{})})]})}var z=a(518),H=a(519),W=a(198),J=a(520),T=Object(j.a)((function(e){return Object(b.a)({badge:{padding:e.spacing(1)},first:{padding:e.spacing(2),border:"1px solid #FFD700",background:"linear-gradient(to top, #FFD700, #FCF6BA)"},second:{padding:e.spacing(2),border:"1px solid #C0C0C0",background:"linear-gradient(to top, #B0B0B0, #DFDFDF)"},third:{padding:e.spacing(2),border:"1px solid #cd7f32",background:"linear-gradient(to top, #ad5f12, #dd9f52)"}})}));function Z(e){var t=T();return Object(f.jsx)(z.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"stretch",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(W.a,{className:t.second,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:"Silver player"})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{children:Object(f.jsx)(x.a,{})})})]})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(W.a,{className:t.first,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:"Gold player"})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{children:Object(f.jsx)(x.a,{})})})]})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(W.a,{className:t.third,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:"Bronze player"})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{children:Object(f.jsx)(x.a,{})})})]})})})]})})}var K=a(521),_=a(472),V=a(255),q=a.n(V),Q=a(105),X=Object(j.a)((function(e){return Object(b.a)({root:{padding:e.spacing(1)}})}));function Y(e){var t=X();return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(K.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline",spacing:2,className:t.root,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(h.a,{children:[e.players.length," player(s)"]})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(_.a,{variant:"contained",color:"primary",startIcon:Object(f.jsx)(q.a,{}),onClick:function(){return function(){var t=a(317)(),n={uuid:Object(Q.uuid)(),username:"New Player",color:t};e.setPlayers(e.players.concat(n))}()},children:"Add a new player"})})]})})})}var $=a(522),ee=a(523),te=a(287),ae=a(260),ne=a.n(ae),re=a(277),ce=Object(j.a)((function(e){return Object(b.a)({Padding:{padding:e.spacing(2)},first:{color:"#FFD700"},second:{color:"#C0C0C0"},third:{color:"#cd7f32"},ColorPicker:{position:"absolute",zIndex:2},Name:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),borderRadius:e.spacing(1),margin:"0px",border:"1px solid rgba(0,0,0,0.1)",width:e.spacing(17)}})}));function ie(e){var t=ce(),a=r.a.useState(!1),n=Object(u.a)(a,2),c=n[0],i=n[1],s=r.a.useState(e.player.username),o=Object(u.a)(s,2),l=o[0],d=o[1];return Object(f.jsx)(H.a,{item:!0,spacing:1,children:Object(f.jsxs)(K.a,{className:t.Padding,onClick:function(){return e.addNotification("click on user","info")},children:[Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",spacing:1,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)($.a,{size:"small",onClick:function(){i(!0)},children:Object(f.jsx)(ne.a,{style:{color:e.player.color}})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(ee.a,{onClickAway:function(){return function(){var t=Object.assign({},e.player);t.username=l,e.changePlayerData(t,e.player.uuid)}()},children:Object(f.jsx)(te.a,{className:t.Name,onChange:function(e){return d(e.target.value)},defaultValue:e.player.username})})})]})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",spacing:1,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{badgeContent:4,showZero:!0,className:t.first,color:"primary",children:Object(f.jsx)(x.a,{})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{badgeContent:14,showZero:!0,className:t.second,color:"primary",children:Object(f.jsx)(x.a,{})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{badgeContent:0,showZero:!0,className:t.third,color:"primary",children:Object(f.jsx)(x.a,{})})})]})})]}),c&&Object(f.jsx)(ee.a,{onClickAway:function(){return i(!1)},children:Object(f.jsx)(re.a,{className:t.ColorPicker,color:e.player.color,onChangeComplete:function(t){var a=Object.assign({},e.player);a.color=t.hex,e.changePlayerData(a,e.player.uuid)},disableAlpha:!0})})]})})}var se=Object(j.a)((function(e){return Object(b.a)({})}));function oe(e){se();var t,a=function(t,a){var n=e.players;n.map((function(e){return e.uuid===a?Object.assign(e,t):e})),e.setPlayers(n)};return Object(f.jsx)(z.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,children:[Object(f.jsx)(Y,{players:e.players,setPlayers:e.setPlayers}),(t=e.players,t.map((function(t){return Object(f.jsx)(ie,{player:t,changePlayerData:a,addNotification:e.addNotification})})))]})})}var le=Object(j.a)((function(e){return Object(b.a)({padding:{padding:e.spacing(1)},subSection:{paddingLeft:e.spacing(1),marginLeft:e.spacing(2),borderLeft:"3px solid rgba(0,0,0,.2)"}})}));function de(e){var t=le();return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(K.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",spacing:4,className:t.padding,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{variant:"h4",color:"primary",children:"About..."})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(z.a,{className:t.subSection,children:[Object(f.jsx)(h.a,{variant:"h5",color:"textSecondary",children:"the author"}),Object(f.jsx)(h.a,{children:"Made with love by @stephane_branly."})]})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(z.a,{className:t.subSection,children:[Object(f.jsx)(h.a,{variant:"h5",color:"textSecondary",children:"the project"}),Object(f.jsx)(h.a,{children:"Project made for personal use first. But feel free to use it."})]})})]})})})}var ue=a(524),je=a(525),be=Object(j.a)((function(e){return Object(b.a)({padding:{padding:e.spacing(1)}})}));function Oe(e){var t=be();return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(K.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline",spacing:1,className:t.padding,children:[Object(f.jsxs)(H.a,{item:!0,children:[Object(f.jsx)("input",{style:{display:"none"},accept:".json",id:"contained-button-import",type:"file",onChange:e.handlerLoadData}),Object(f.jsx)("label",{htmlFor:"contained-button-import",children:Object(f.jsx)(_.a,{variant:"contained",color:"primary",component:"span",startIcon:Object(f.jsx)(ue.a,{}),children:"Load data"})})]}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(_.a,{variant:"contained",color:"primary",startIcon:Object(f.jsx)(je.a,{}),onClick:e.handlerSaveData,children:"Save data"})})]})})})}var pe=Object(j.a)((function(e){return Object(b.a)({padding:{padding:e.spacing(1)}})}));function he(e){pe();var t={handlerSaveData:e.handlerSaveData,handlerLoadData:e.handlerLoadData};return Object(f.jsx)(z.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,children:[Object(f.jsx)(Oe,Object(s.a)({},t)),Object(f.jsx)(de,{})]})})}var me=a(261),xe=a.n(me),fe=Object(j.a)((function(e){return Object(b.a)({root:{padding:e.spacing(1)}})}));function ge(e){var t=fe();return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(K.a,{children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",spacing:2,className:t.root,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(h.a,{children:[e.games.length," game(s)"]})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(_.a,{variant:"contained",color:"primary",startIcon:Object(f.jsx)(xe.a,{}),onClick:function(){return function(){var t={uuid:Object(Q.uuid)(),gamename:"New game"};e.setGames(e.games.concat(t))}()},children:"Add a new game"})})]})})})}var ye=Object(j.a)((function(e){return Object(b.a)({Padding:{padding:e.spacing(2)},first:{color:"#FFD700"},second:{color:"#C0C0C0"},third:{color:"#cd7f32"},ColorPicker:{position:"absolute",zIndex:2},Name:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),borderRadius:e.spacing(1),margin:"0px",border:"1px solid rgba(0,0,0,0.1)",width:e.spacing(17)}})}));function ve(e){var t=ye();return Object(f.jsx)(H.a,{item:!0,spacing:1,children:Object(f.jsx)(K.a,{className:t.Padding,onClick:function(){return e.setCurrentGame(e.game)},children:Object(f.jsx)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",children:Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",spacing:1,children:Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:e.game.gamename})})})})})})})}var ke=a(558),Ce=a(545),we=a(537),Ne=a(538),De=a(546),Se=a(547),Re=a(555),Fe=a(536),Pe=a(534),Ie=a(539),Ge=a(281),Ee=a(473),Ae=a(526),Ue=a(554),Be=a(527),Me=a(528),Le=a(529),ze=Object(j.a)((function(e){return Object(b.a)({})}));function He(e){ze();var t,a=function(t){return 0!==e.selectedPlayers.filter((function(e){return e.uuid===t})).length},n=function(t){a(t)?e.setSelectedPlayers(e.selectedPlayers.filter((function(e){return e.uuid!==t}))):e.setSelectedPlayers([].concat(Object(Ge.a)(e.selectedPlayers),[{uuid:t,rank:1}]))};return Object(f.jsxs)(Me.a,{dividers:!0,children:[Object(f.jsx)(h.a,{children:"Who was playing?"}),Object(f.jsx)(Le.a,{children:(t=e.players,t.map((function(e){return Object(f.jsxs)(Ee.a,{dense:!0,button:!0,onClick:function(){return n(e.uuid)},children:[Object(f.jsx)(Ae.a,{children:Object(f.jsx)(Ue.a,{edge:"end",tabIndex:-1,disableRipple:!0,checked:a(e.uuid),onClick:function(){return n(e.uuid)},style:{color:e.color}})}),Object(f.jsx)(Be.a,{id:e.uuid,primary:e.username})]},e.uuid)})))})]})}var We=a(278),Je=a(37),Te=a(550),Ze=Object(j.a)((function(e){return Object(b.a)({})}));function Ke(e){Ze();return Object(f.jsxs)(Me.a,{dividers:!0,children:[Object(f.jsx)(h.a,{children:"When?"}),Object(f.jsx)(Je.a,{utils:We.a,children:Object(f.jsx)(Te.a,{value:e.selectedDate,onChange:function(t){e.setSelectedDate(t)},showTodayButton:!0,format:"dd/MM/yyyy HH:mm"})})]})}var _e=a(535),Ve=a(552),qe=function(e,t){return e.filter((function(e){return e.uuid===t}))[0]},Qe=function(e){return e.username.length>1?e.username[0].toUpperCase()+e.username[1]:e.username[0].toUpperCase()},Xe=function(e,t){var a={resultUuid:e.uuid,playersRank:[]};return t.playersRank.forEach((function(e){a.playersRank.push({playerUuid:e.playerUuid,score:e.score,deltaScore:e.deltaScore})})),e.ranks.forEach((function(n){var r=e.ranks.filter((function(e){return n.rank===e.rank})).length,c=e.ranks.filter((function(e){return n.rank!==e.rank})),i=Ye(n.uuid,a),s=t.playersRank[Ye(n.uuid,t)].score,o=0;c.forEach((function(e){var a,c,i=t.playersRank[Ye(e.uuid,t)].score,l=n.rank<e.rank?1:0,d=(a=s,c=i,1/(1+Math.pow(10,(c-a)/400))),u=function(e,t,a){return e+32*(a-t)/(arguments.length>3&&void 0!==arguments[3]?arguments[3]:1)}(s,d,l,r);o+=u-s})),a.playersRank[i].score=s+o,a.playersRank[i].deltaScore=o})),a},Ye=function(e,t){return t.playersRank.findIndex((function(t){return t.playerUuid===e}))},$e=function(e){var t=[];return e.forEach((function(e){return t.push(et(e))})),console.log(t),t},et=function(e){var t={};return t.resultUuid=e.resultUuid,e.playersRank.forEach((function(e){return t[e.playerUuid]=Math.round(e.score)})),t},tt=Object(j.a)((function(e){return Object(b.a)({})}));function at(e){tt();var t,a=function(){for(var t=[],a=1;a<e.selectedPlayers.length+1;a++)t.push(Object(f.jsx)(_e.a,{value:a,children:a},a));return t};return Object(f.jsxs)(Me.a,{dividers:!0,children:[Object(f.jsx)(h.a,{children:"Results"}),Object(f.jsx)(Le.a,{children:(t=e.selectedPlayers,t.map((function(t){return Object(f.jsx)(Ee.a,{dense:!0,button:!0,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",alignItems:"baseline",justify:"space-between",spacing:1,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(ke.a,{alt:t.uuid,style:{backgroundColor:qe(e.players,t.uuid).color},children:Qe(qe(e.players,t.uuid))})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:qe(e.players,t.uuid).username})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(Ve.a,{value:t.rank,onChange:function(a){return function(t,a){var n=e.selectedPlayers;n.map((function(e){return e.uuid===a?e.rank=t.target.value:e})),e.setSelectedPlayers(n)}(a,t.uuid)},children:a()})})]})},t.uuid)})))})]})}function nt(e){var t=r.a.useState("who"),a=Object(u.a)(t,2),n=a[0],c=a[1],i=r.a.useState(e.addResultOpen.id?e.game.results.filter((function(t){return t.uuid===e.addResultOpen.id}))[0].date:new Date),s=Object(u.a)(i,2),o=s[0],l=s[1],d=r.a.useState(e.addResultOpen.id?e.game.results.filter((function(t){return t.uuid===e.addResultOpen.id}))[0].ranks:[]),j=Object(u.a)(d,2),b=j[0],O=j[1];return Object(f.jsxs)(Re.a,{fullWidth:!0,maxWidth:"sm",open:e.addResultOpen.open,children:[e.addResultOpen.id?Object(f.jsx)(Fe.a,{children:"Edit result"}):Object(f.jsx)(Fe.a,{children:"New result"}),"who"===n?Object(f.jsx)(He,{players:e.players,setSelectedPlayers:O,selectedPlayers:b}):"when"===n?Object(f.jsx)(Ke,{setSelectedDate:l,selectedDate:o}):"results"===n?Object(f.jsx)(at,{players:e.players,setSelectedPlayers:O,selectedPlayers:b}):Object(f.jsx)(h.a,{children:"ERROR"}),Object(f.jsxs)(Pe.a,{children:[Object(f.jsx)(_.a,{onClick:function(){return e.setAddResultOpen({id:void 0,open:!1})},color:"primary",variant:"outlined",children:"Cancel"}),Object(f.jsx)(_.a,{autoFocus:!0,disabled:"who"===n,onClick:function(){"when"===n?c("who"):"results"===n&&c("when")},color:"primary",variant:"outlined",startIcon:Object(f.jsx)(we.a,{}),children:"Back"}),"results"===n?Object(f.jsx)(_.a,{autoFocus:!0,onClick:function(){return function(){var t=0,a=!1;if(b.forEach((function(e){0===t&&(t=e.rank),t!==e.rank&&(a=!0)})),a){var n=b.sort((function(e,t){return e.rank>t.rank?1:-1}));O(n);var r={date:o,ranks:b,uuid:Object(Q.uuid)()};e.addResultOpen.id?e.addNotification("Result correctly edited","success"):e.addNotification("New result correctly added","success"),e.setAddResultOpen({id:void 0,open:!1}),e.addResult(r,e.addResultOpen.id)}else e.addNotification("Results need at least two different rank","error")}()},color:"primary",variant:"outlined",endIcon:Object(f.jsx)(Ne.a,{}),children:"Send"}):Object(f.jsx)(_.a,{autoFocus:!0,onClick:function(){return function(){if("who"===n)if(b.length<2)e.addNotification("Please select a least 2 players","error");else{c("when");var t=b.sort((function(t,a){return qe(e.players,t.uuid).username>qe(e.players,a.uuid).username?1:-1}));O(t)}else"when"===n&&c("results")}()},color:"primary",variant:"outlined",endIcon:Object(f.jsx)(Ie.a,{}),children:"Next"})]})]})}var rt=a(560),ct=a(559),it=a(540),st=Object(j.a)((function(e){return Object(b.a)({root:{backgroundColor:"rgba(0,0,0,0.9)",marginLeft:e.spacing(3),marginBottom:e.spacing(1),border:"2px solid #FFFFFF",zIndex:0},first:{color:"#FFD700"},second:{color:"#C0C0C0"},third:{color:"#cd7f32"}})}));function ot(e){var t,a=st(),n="".concat(Math.round(e.score)),r="#FDFDFD";return e.deltaScore&&(n=e.score<0?"".concat(Math.round(e.score)):"+".concat(Math.round(e.score)),r=e.score<0?"#FF2020":"#10FFB0"),Object(f.jsx)(ct.a,{className:a.root,icon:(t=e.rank,1===t?Object(f.jsx)(it.a,{className:a.first}):2===t?Object(f.jsx)(it.a,{className:a.second}):3===t?Object(f.jsx)(it.a,{className:a.third}):Object(f.jsx)(f.Fragment,{})),label:n,size:"small",variant:"outlined",style:{color:r}})}var lt=Object(j.a)((function(e){return Object(b.a)({Padding:{padding:e.spacing(2)},first:{color:"#FFD700"},second:{color:"#C0C0C0"},third:{color:"#cd7f32"},ColorPicker:{position:"absolute",zIndex:2}})}));function dt(e){var t=lt();return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(K.a,{className:t.Padding,onClick:function(){return e.setAddResultOpen({id:e.result.uuid,open:!0})},children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",spacing:1,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",spacing:4,children:e.result.ranks.map((function(t){var a=e.playersRank.filter((function(e){return e.playerUuid===t.uuid}))[0],n="New score: ".concat(Math.round(a.score));return Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(rt.a,{title:n,children:Object(f.jsx)(J.a,{overlap:"circle",style:{borderColor:"rgba(0,0,0,0)"},anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:Object(f.jsx)(ot,{rank:t.rank,score:a.deltaScore,deltaScore:!0}),children:Object(f.jsx)(ke.a,{alt:qe(e.players,t.uuid).username,style:{backgroundColor:qe(e.players,t.uuid).color},children:Qe(qe(e.players,t.uuid))})})})})}))})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{children:e.result.date.toLocaleString()})})]})})})}var ut=a(541);function jt(e){return Object(f.jsxs)(Re.a,{open:!0,onClose:function(t,a){"clickaway"!==a&&e.setDeleteGameOpen(!1)},children:[Object(f.jsx)(Fe.a,{children:"Delete this game?"}),Object(f.jsx)(Me.a,{children:Object(f.jsx)(ut.a,{children:"This will delete this game and all associated results."})}),Object(f.jsxs)(Pe.a,{children:[Object(f.jsx)(_.a,{onClick:function(){return e.setDeleteGameOpen(!1)},autoFocus:!0,children:"Cancel"}),Object(f.jsx)(_.a,{onClick:function(){return e.deleteGame()},variant:"outlined",style:{color:"#DD0505",borderColor:"#DD0505"},children:"Delete"})]})]})}var bt=a(530);function Ot(e){var t=r.a.useState(e.currentGamename),a=Object(u.a)(t,2),n=a[0],c=a[1];return Object(f.jsxs)(Re.a,{open:!0,onClose:function(t,a){"clickaway"!==a&&e.setEditMode(!1)},children:[Object(f.jsx)(Fe.a,{children:"Change the gamename"}),Object(f.jsx)(Me.a,{children:Object(f.jsx)(ut.a,{children:Object(f.jsx)(bt.a,{value:n,onChange:function(e){return c(e.target.value)}})})}),Object(f.jsxs)(Pe.a,{children:[Object(f.jsx)(_.a,{onClick:function(){return e.setEditMode(!1)},autoFocus:!0,children:"Cancel"}),Object(f.jsx)(_.a,{onClick:function(){e.handleChangeGamename(n),e.setEditMode(!1)},variant:"outlined",children:"Update"})]})]})}var pt=a(282),ht=a(562),mt=a(276),xt=a(131),ft=a(127),gt=a(548),yt=Object(j.a)((function(e){return Object(b.a)({Main:{padding:e.spacing(2),marginBottom:e.spacing(1)},first:{color:"#FFD700"},second:{color:"#C0C0C0"},third:{color:"#cd7f32"},ColorPicker:{position:"absolute",zIndex:2},Name:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),borderRadius:e.spacing(1),margin:"0px",border:"1px solid rgba(0,0,0,0.1)",width:e.spacing(17)}})}));function vt(e){var t,a=yt(),n=r.a.useState({id:void 0,open:!1}),c=Object(u.a)(n,2),i=c[0],s=c[1],o=r.a.useState(!1),l=Object(u.a)(o,2),d=l[0],j=l[1],b=r.a.useState(!1),O=Object(u.a)(b,2),p=O[0],m=O[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(K.a,{className:a.Main,children:[Object(f.jsxs)(H.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",spacing:1,children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(H.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline",children:[Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)($.a,{size:"medium",onClick:function(){return e.setCurrentGame(void 0)},children:Object(f.jsx)(we.a,{})})})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsxs)(Ce.a,{disableElevation:!0,variant:"contained",color:"primary",children:[Object(f.jsx)(_.a,{endIcon:Object(f.jsx)(Ne.a,{}),onClick:function(){return s({id:void 0,open:!0})},children:"New result"}),Object(f.jsx)(_.a,{onClick:function(){return j(!0)},children:Object(f.jsx)(De.a,{})}),Object(f.jsx)(_.a,{onClick:function(){return m(!0)},children:Object(f.jsx)(Se.a,{})})]})})]})}),Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(h.a,{color:"primary",variant:"h3",align:"center",children:e.game.gamename})}),e.game.players&&Object(f.jsxs)(H.a,{item:!0,children:[Object(f.jsx)(H.a,{container:!0,direction:"row",justify:"flex-start",spacing:4,children:function(){var t=0;return e.game.rankHistory?e.game.rankHistory[e.game.rankHistory.length-1].playersRank.sort((function(e,t){return e.score<t.score?1:-1})).map((function(a){return t+=1,Object(f.jsx)(H.a,{item:!0,children:Object(f.jsx)(J.a,{overlap:"circle",style:{borderColor:"rgba(0,0,0,0)"},anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:Object(f.jsx)(ot,{rank:t,score:a.score,deltaScore:!1}),children:Object(f.jsx)(ke.a,{alt:qe(e.players,a.playerUuid).username,style:{backgroundColor:qe(e.players,a.playerUuid).color},children:Qe(qe(e.players,a.playerUuid))})})})})):Object(f.jsx)(f.Fragment,{})}()}),e.game.rankHistory&&Object(f.jsxs)(ht.a,{width:1e3,height:400,data:$e(e.game.rankHistory),margin:{top:20,right:20,left:20,bottom:20},children:[Object(f.jsx)(mt.a,{dataKey:"resultUuid"}),Object(f.jsx)(xt.a,{}),Object(f.jsx)(ft.a,{}),Object(f.jsx)(gt.a,{stroke:"#f5f5f5",strokeDasharray:"3 3"}),(t=e.game.players,t.map((function(t){return Object(f.jsx)(pt.a,{type:"monotone",strokeWidth:2,dataKey:t.uuid,stroke:qe(e.players,t.uuid).color,yAxisId:1})}))).flat()]})]})]}),i.open?Object(f.jsx)(nt,{game:e.game,players:e.players,addResultOpen:i,setAddResultOpen:s,addNotification:e.addNotification,addResult:function(t,a){var n=Object.assign({},e.game);if(n.results?a&&(n.results=n.results.filter((function(e){return e.uuid!==a}))):n.results=[],n.results.push(t),t.ranks.forEach((function(e){var t;n.players?n.players.some((function(t){return t.uuid===e.uuid}))||null===(t=n.players)||void 0===t||t.push({uuid:e.uuid,rank:0}):n.players=[{uuid:e.uuid,rank:0}]})),n.rankHistory=function(e){if(!e.results)return[];var t=[];t.push({resultUuid:"",playersRank:[]}),t[0].playersRank=e.players.map((function(e){return{playerUuid:e.uuid,score:1200,deltaScore:0}}));var a=t[0];return e.results.forEach((function(e){var n=Xe(e,a);t.push(n),a=n})),t}(n),n.players){var r=n.players.sort((function(e,t){return e.rank>t.rank?1:-1}));n.players=r}e.changeGameData(n,e.game.uuid)}}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)(H.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",spacing:1,children:function(){if(e.game.results)return e.game.results.map((function(t){var a=e.game.rankHistory.filter((function(e){return e.resultUuid===t.uuid}))[0].playersRank;return Object(f.jsx)(dt,{result:t,players:e.players,setAddResultOpen:s,playersRank:a})}))}()}),p&&Object(f.jsx)(jt,{setDeleteGameOpen:m,deleteGame:function(){e.addNotification("Game correctly deleted","success"),m(!1),e.deleteGame(e.game.uuid)}}),d&&Object(f.jsx)(Ot,{setEditMode:j,handleChangeGamename:function(t){var a=Object.assign({},e.game);a.gamename=t,e.changeGameData(a,e.game.uuid)},currentGamename:e.game.gamename})]})}var kt=Object(j.a)((function(e){return Object(b.a)({padding:{padding:e.spacing(1)}})}));function Ct(e){kt();var t,a=Object(n.useState)(void 0),r=Object(u.a)(a,2),c=r[0],i=r[1],s=function(t,a){var n=e.games;n.map((function(e){return e.uuid===a?Object.assign(e,t):e})),e.setGames(n)};return Object(f.jsx)(z.a,{children:c?Object(f.jsx)(vt,{game:c,changeGameData:s,setCurrentGame:i,players:e.players,addNotification:e.addNotification,deleteGame:function(t){var a=e.games.filter((function(e){return e.uuid!==t}));i(void 0),e.setGames(a),e.addNotification("Game correctly deleted","success")}}):Object(f.jsxs)(H.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,children:[Object(f.jsx)(ge,{games:e.games,setGames:e.setGames}),(t=e.games,t.map((function(e){return Object(f.jsx)(ve,{game:e,changeGameData:s,setCurrentGame:i})})))]})})}var wt=Object(j.a)((function(e){return Object(b.a)({root:{}})}));function Nt(e){wt();return function(e){switch(e.currentPage){case"summary":return Object(f.jsx)(Z,{});case"players":return Object(f.jsx)(oe,{players:e.players,setPlayers:e.setPlayers,addNotification:e.addNotification});case"settings":return Object(f.jsx)(he,{handlerSaveData:e.handlerSaveData,handlerLoadData:e.handlerLoadData});case"games":return Object(f.jsx)(Ct,{games:e.games,setGames:e.setGames,players:e.players,addNotification:e.addNotification});default:return Object(f.jsx)(f.Fragment,{})}}(e)}var Dt=a(279),St=a(549),Rt=a(561),Ft=a(553);function Pt(e){return Object(f.jsx)(Ft.a,Object(s.a)({elevation:6,variant:"filled"},e))}function It(e){var t=function(t,a){"clickaway"!==a&&e.setNotification({open:!1})};return e.notification.open?Object(f.jsx)(Rt.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.notification.open,autoHideDuration:6e3,onClose:t,children:Object(f.jsx)(Pt,{severity:e.notification.severity?e.notification.severity:"info",onClose:t,children:e.notification.text})}):Object(f.jsx)(f.Fragment,{})}var Gt=Object(Dt.a)({palette:{error:{main:"#DD0505"},primary:{main:"#3f5efb"},secondary:{main:"#d2d2d2"}}}),Et=Object(j.a)((function(e){return Object(b.a)({App:{paddingBottom:e.spacing(15)}})}));var At=function(){var e=r.a.useState("summary"),t=Object(u.a)(e,2),n=t[0],c=t[1],i=r.a.useState([]),o=Object(u.a)(i,2),j=o[0],b=o[1],O=r.a.useState([]),p=Object(u.a)(O,2),h=p[0],m=p[1],x=r.a.useState({open:!1}),g=Object(u.a)(x,2),v=g[0],k=g[1],C=Et(),w=function(e,t){k({open:!0,text:e,severity:t||void 0})},N={currentPage:n,games:h,setGames:m,players:j,setPlayers:b,handlerSaveData:function(){var e={players:j,games:h},t=a(469),n=JSON.stringify(e),r=new Blob([n],{type:"application/json"});t.saveAs(r,"save_game-ranking.json")},handlerLoadData:function(e){try{var t;e.preventDefault();var a=new FileReader;a.onload=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(a=t.target)||void 0===a?void 0:a.result)&&(n=JSON.parse(t.target.result),b(n.players),m(n.games),w("Data correctly loaded","success"),c("summary"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(null===(t=e.target)||void 0===t?void 0:t.files)&&a.readAsText(e.target.files[0])}catch(n){w("Error when loading data","error")}},addNotification:w},D={handleChangeCurrentPage:function(e,t){c(t)},currentPage:n},S={notification:v,setNotification:k};return Object(f.jsxs)(St.a,{theme:Gt,children:[Object(f.jsxs)("div",{className:C.App,children:[Object(f.jsx)(y,{}),Object(f.jsx)(Nt,Object(s.a)({},N)),Object(f.jsx)(L,Object(s.a)({},D))]}),Object(f.jsx)(It,Object(s.a)({},S))]})};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(At,{})}),document.getElementById("root"))}},[[470,1,2]]]);
//# sourceMappingURL=main.ea06366a.chunk.js.map